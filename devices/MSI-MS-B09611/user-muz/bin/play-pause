#!/bin/bash

## Smart play-pause, for currently focused player only.

focused_pid=$(/usr/bin/xdotool getwindowfocus getwindowpid)
focused_cmd=$(ps -p $focused_pid -o args | tail -n1)

case $focused_cmd in
	*spotify* )
	target_player=spotify
	;;

	*"Google Play Music Desktop Player"* )
	target_player=google_play_music_desktop_player
	;;

	*/usr/bin/clementine* )
	target_player=clementine
	;;

	*"youtube-music-desktop-app"* )
	target_player=youtubemusic
	;;

	*/usr/bin/MellowPlayer* )
	target_player=MellowPlayer3
	;;

	*/usr/lib/chromium/chromium* )
	target_player=$(playerctl -l|grep chromium)
	;;

	* )
	# echo $focused_cmd > /tmp/pp-focused-app
	target_player=unknown
	;;
esac

#echo $target_player > /tmp/pp-focused-app
if [ "$focused_cmd" = "unknown" ] ; then
	/usr/bin/playerctl play-pause
else
	/usr/bin/playerctl -p $target_player play-pause
fi
